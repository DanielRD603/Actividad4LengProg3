@model Actividad4LengProg3.Models.EstudianteViewModel
@{ ViewData["Title"] = "Editar Estudiante"; }
<h2>@ViewData["Title"]</h2>
<form asp-action="Editar" asp-controller="Estudiantes" method="post" class="mt-3">
  @Html.AntiForgeryToken()
  <div asp-validation-summary="ModelOnly" class="text-danger"></div>
  <input type="hidden" asp-for="Matricula" />
  <div class="row g-3">
    <div class="col-md-3">
      <label asp-for="Matricula" class="form-label"></label>
      <input asp-for="Matricula" class="form-control" readonly />
      <span asp-validation-for="Matricula" class="text-danger"></span>
    </div>
    <div class="col-md-5">
      <label asp-for="NombreCompleto" class="form-label"></label>
      <input asp-for="NombreCompleto" class="form-control" />
      <span asp-validation-for="NombreCompleto" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="CorreoInstitucional" class="form-label"></label>
      <input asp-for="CorreoInstitucional" class="form-control" />
      <span asp-validation-for="CorreoInstitucional" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="Celular" class="form-label"></label>
      <input asp-for="Celular" class="form-control" />
      <span asp-validation-for="Celular" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="Telefono" class="form-label"></label>
      <input asp-for="Telefono" class="form-control" />
      <span asp-validation-for="Telefono" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="FechaNacimiento" class="form-label"></label>
      <input asp-for="FechaNacimiento" type="date" class="form-control" />
      <span asp-validation-for="FechaNacimiento" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="Genero" class="form-label"></label>
      <select asp-for="Genero" class="form-select" asp-items="Html.GetEnumSelectList<Sexo>()"></select>
      <span asp-validation-for="Genero" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="Turno" class="form-label"></label>
      <select asp-for="Turno" class="form-select" asp-items="Html.GetEnumSelectList<Turno>()"></select>
      <span asp-validation-for="Turno" class="text-danger"></span>
    </div>
    <div class="col-md-4">
      <label asp-for="Recinto" class="form-label"></label>
      <select asp-for="Recinto" class="form-select" asp-items="Html.GetEnumSelectList<RecintoEnum>()"></select>
      <span asp-validation-for="Recinto" class="text-danger"></span>
    </div>
    <div class="col-md-8">
      <label asp-for="Carrera" class="form-label"></label>
      <select asp-for="Carrera" class="form-select" asp-items="ViewBag.Carreras"></select>
      <span asp-validation-for="Carrera" class="text-danger"></span>
    </div>
    <div class="col-12">
      <label asp-for="Direccion" class="form-label"></label>
      <textarea asp-for="Direccion" class="form-control" rows="2"></textarea>
      <span asp-validation-for="Direccion" class="text-danger"></span>
    </div>
    <div class="col-md-4 form-check mt-2">
      <input asp-for="Becado" class="form-check-input" id="chkBecado" />
      <label asp-for="Becado" class="form-check-label"></label>
    </div>
    <div class="col-md-4" id="porcentajeWrapper">
      <label asp-for="PorcentajeBeca" class="form-label"></label>
      <input asp-for="PorcentajeBeca" class="form-control" type="number" min="0" max="100" />
      <span asp-validation-for="PorcentajeBeca" class="text-danger"></span>
    </div>
  </div>
  <div class="mt-3">
    <button type="submit" class="btn btn-primary">Guardar cambios</button>
    <a asp-action="Lista" asp-controller="Estudiantes" class="btn btn-secondary">Volver a la lista</a>
  </div>
</form>
@section Scripts { <partial name="_ValidationScriptsPartial" />
  <script>
    (function(){
      const chk=document.getElementById('chkBecado');
      const wrap=document.getElementById('porcentajeWrapper');
      const input=document.getElementById('PorcentajeBeca');
      function toggle(){ if(chk.checked){wrap.style.display=''; input?.removeAttribute('disabled');} else {wrap.style.display='none'; if(input){input.value=''; input.setAttribute('disabled','disabled');}} }
      toggle(); chk.addEventListener('change',toggle);
    })();
  </script>
}
